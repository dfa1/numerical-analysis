<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title>Gamma approximation</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" href="style.css">
        <script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js"></script>
        <script type="text/javascript" src="functional.js"></script>
        <script type="text/javascript" src="bernoulli.js"></script>
        <script type="text/javascript">
            function f(r) {
                return 1 / r;
            }

            // n-th derivate of 1/x; simplified version
            function d(x, n) {
                return Math.pow(-1, n) * (1 / Math.pow(x, n + 1));
            }

            function gamma(n) {
                //                                integrale
                var gamma = 0.5 * (f(1) + f(n)) + Math.log(n);
                //alert(gamma);

                each(range(n), function(k) {
                    var b = bernoulli(0, 2 * k);
                    var x = Math.pow(-1, 2 * k - 1) * (b / (2 * k)) * (( 1 / Math.pow(n, 2 * k)) - 1);
                    //alert('b =' + b + '\n x = ' + x);
                    gamma += x;
                });
                // lim(n -> oo, sum(1/r) - log(n)
                return gamma - Math.log(n);
            }

            $(function() {
                $('#calc').click(function() {
                    var n = $('#n').val().replace(",", ".");
                    var error = false;
                    var aNumber = /^\d+(\.\d+)?$/;

                    if (!n || !n.match(aNumber) || n < 0) {
                        $('#n').css('background', 'red');
                        error = true;
                    } else {
                        $('#n').css('background', 'white');
                    }

                    if (error) {
                        return;
                    }

                    $('#results').html("");
                    $('#results').append('&gamma;<small><sub>' + n + '</sub></small> = ' + gamma(n));
                });
            });
        </script>
    </head>
    <body>
        <h1>&gamma; approximation</h1>

        <label>n</label><input id="n" type="text"/>
        <button id="calc">Calculate!</button>

        <div id="results">
        </div>

        <p>by Davide Angelocola 2 Nov 2009</p>
    </body>
</html>